<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>src.analysis.functions &#8212; I-MaT 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for src.analysis.functions</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Module: analysis.functions.py</span>
<span class="sd">=============================</span>

<span class="sd">This module includes various functions for musical analysis in the Interactive Music Analysis Tool (I-MaT). These functions take a music21 stream object and return the result as a pandas DataFrame.</span>

<span class="sd">This module contains various musical analysis functions to be used within the Interactive Music Analysis Tool (I-MaT).</span>
<span class="sd">Each function in this module performs a specific type of music analysis on a music21 stream object and returns the</span>
<span class="sd">result as a pandas DataFrame. The type of analysis performed includes, but is not limited to, ambitus calculation,</span>
<span class="sd">note and rest counting, pitch and interval analysis, and more complex tasks such as calculating activity rates or</span>
<span class="sd">comparing pitches and pitch classes per duration.</span>

<span class="sd">The functions in this module are designed to be easily callable from other parts of the application, and their results</span>
<span class="sd">are designed to be easily readable, making them flexible tools for musical analysis. They also use a standard interface,</span>
<span class="sd">accepting a music21 stream object and an identifier string as input and returning a pandas DataFrame as output.</span>

<span class="sd">Functions</span>
<span class="sd">---------</span>
<span class="sd">- analysis_advanced_calculate_activity_rate</span>
<span class="sd">- analysis_advanced_compare_pitches_and_pitch_classes_per_duration</span>
<span class="sd">- analysis_ambitus</span>
<span class="sd">- analysis_number_of_intervals_per_type</span>
<span class="sd">- analysis_number_of_intervals_per_type_with_direction</span>
<span class="sd">- analysis_number_of_notes</span>
<span class="sd">- analysis_number_of_pitch_classes_per_metrical_position</span>
<span class="sd">- analysis_number_of_pitch_classes_per_offset</span>
<span class="sd">- analysis_number_of_pitch_classes_per_tone_duration</span>
<span class="sd">- analysis_number_of_pitches_per_metrical_position</span>
<span class="sd">- analysis_number_of_pitches_per_offset</span>
<span class="sd">- analysis_number_of_pitches_per_tone_duration</span>
<span class="sd">- analysis_number_of_rests</span>
<span class="sd">- analysis_number_of_rests_per_rest_duration</span>
<span class="sd">- analysis_number_of_sound_events_per_metrical_position</span>
<span class="sd">- analysis_number_of_sound_events_per_pitch</span>
<span class="sd">- analysis_number_of_sound_events_per_pitch_class</span>
<span class="sd">- analysis_number_of_sound_events_per_tone_duration</span>

<span class="sd">Each function performs a specific type of music analysis such as ambitus calculation, note and rest counting, pitch and interval analysis, and more complex tasks like calculating activity rates or comparing pitches and pitch classes per duration.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">music21.stream</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">interval</span><span class="p">,</span> <span class="n">note</span>

<span class="kn">from</span> <span class="nn">iMaT.src.constants</span> <span class="kn">import</span> <span class="n">PITCH_CLASS_NAMES</span>
<span class="kn">from</span> <span class="nn">iMaT.src.utils.error_handling</span> <span class="kn">import</span> <span class="n">handle_error</span>


<div class="viewcode-block" id="analysis_ambitus"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_ambitus">[docs]</a><span class="k">def</span> <span class="nf">analysis_ambitus</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and calculate the ambitus (range) of pitches in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes, which might alter the true ambitus range.</span>
<span class="sd">    Then, it goes through all the note elements in the music object to determine the lowest and highest pitches.</span>
<span class="sd">    If there are no pitches in the music (for example, if the music only contains rests), then the DataFrame will</span>
<span class="sd">    indicate this with dashes (&quot;-&quot;) in all the pitch-related columns.</span>

<span class="sd">    The ambitus analysis can be a useful metric in music analysis tasks, as it provides a simple numerical</span>
<span class="sd">    representation of the piece&#39;s melodic complexity.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the ambitus analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with a row representing the ambitus analysis result, including the identifier, MIDI</span>
<span class="sd">        pitch values and names of the lowest and highest notes, and the ambitus (range) in MIDI pitches and</span>
<span class="sd">        musical interval.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The ambitus refers to the range of pitches (notes) covered by a piece of music. It is determined by</span>
<span class="sd">    identifying the lowest and highest pitches in the music. The function calculates the MIDI pitch values</span>
<span class="sd">    (integer representation of pitches) and the note names (pitch names with octave) of the lowest and highest</span>
<span class="sd">    pitches, as well as the interval (distance) between them. The ambitus provides insight into the melodic</span>
<span class="sd">    and tonal span of the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the MIDI pitch</span>
<span class="sd">    value of the lowest and highest pitches, the ambitus range in MIDI pitches, the note name of the lowest and</span>
<span class="sd">    highest pitches, and the interval name (distance between the lowest and highest pitches) in music theory terms.</span>
<span class="sd">    If there are no pitches in the music, the ambitus values will be indicated with dashes (&quot;-&quot;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="n">pitches</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">pitch</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">pitch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pitches</span><span class="p">:</span>
            <span class="n">min_pitch</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
            <span class="n">max_pitch</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
            <span class="n">min_pitch_name</span> <span class="o">=</span> <span class="n">min_pitch</span><span class="o">.</span><span class="n">nameWithOctave</span>
            <span class="n">max_pitch_name</span> <span class="o">=</span> <span class="n">max_pitch</span><span class="o">.</span><span class="n">nameWithOctave</span>
            <span class="n">interval_name</span> <span class="o">=</span> <span class="n">interval</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="n">min_pitch</span><span class="p">,</span> <span class="n">max_pitch</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>

            <span class="n">ambitus</span> <span class="o">=</span> <span class="n">max_pitch</span><span class="o">.</span><span class="n">midi</span> <span class="o">-</span> <span class="n">min_pitch</span><span class="o">.</span><span class="n">midi</span>

            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Identifier&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">identifier</span><span class="p">],</span>
                               <span class="s1">&#39;MIDI Pitch (min)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">min_pitch</span><span class="o">.</span><span class="n">midi</span><span class="p">],</span>
                               <span class="s1">&#39;MIDI Pitch (max)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">max_pitch</span><span class="o">.</span><span class="n">midi</span><span class="p">],</span>
                               <span class="s1">&#39;Ambitus (MIDI Interval)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ambitus</span><span class="p">],</span>
                               <span class="s1">&#39;Note Name (min)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">min_pitch_name</span><span class="p">],</span>
                               <span class="s1">&#39;Note Name (max)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">max_pitch_name</span><span class="p">],</span>
                               <span class="s1">&#39;Ambitus (Interval Name)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">interval_name</span><span class="p">]})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Identifier&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">identifier</span><span class="p">],</span>
                               <span class="s1">&#39;MIDI Pitch (min)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span>
                               <span class="s1">&#39;MIDI Pitch (max)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span>
                               <span class="s1">&#39;Ambitus (MIDI Interval)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span>
                               <span class="s1">&#39;Note Name (min)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span>
                               <span class="s1">&#39;Note Name (max)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">],</span>
                               <span class="s1">&#39;Ambitus (Interval Name)&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;-&#39;</span><span class="p">]})</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>

<div class="viewcode-block" id="analysis_number_of_notes"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_notes">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_notes</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of notes (individual pitches) in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch is counted separately.</span>
<span class="sd">    Then, it goes through all the note elements in the music object to count the number of notes. Note that only</span>
<span class="sd">    actual pitches are counted, and rests or other non-pitched elements are not included.</span>

<span class="sd">    The note count can serve as a simple metric of the piece&#39;s complexity and could be useful in various music</span>
<span class="sd">    analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the note count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with a row representing the note count analysis result, including the identifier and</span>
<span class="sd">        the count of notes.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    In music, a tone refers to an individual pitch, typically represented by a note. This function analyzes the</span>
<span class="sd">    music21 stream object and counts the number of occurrences of notes within the stream.</span>

<span class="sd">    The function considers any note object present in the stream, including notes with different durations, pitches,</span>
<span class="sd">    and other attributes. Rests and other non-pitched elements are excluded from the count.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results) and the count of</span>
<span class="sd">    notes in the stream.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="n">num_tones</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Identifier&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">identifier</span><span class="p">],</span> <span class="s1">&#39;Number of Notes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">num_tones</span><span class="p">]})</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_rests"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_rests">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_rests</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of rests in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each rest is counted separately.</span>
<span class="sd">    Then, it goes through all the rest elements in the music object to count the number of rests.</span>

<span class="sd">    The rest count can provide insights about the piece&#39;s rhythmic complexity and structure, and could be useful</span>
<span class="sd">    in various music analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the rest count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with a row representing the rest count analysis result, including the identifier and</span>
<span class="sd">        the count of rests.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    In music notation, a rest indicates a period of silence or absence of musical sound. Rests are used to</span>
<span class="sd">    indicate pauses or breaks in the music. This function analyzes the music21 stream object and counts the</span>
<span class="sd">    number of rest elements present in the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results) and the count</span>
<span class="sd">    of rests in the music.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">num_rests</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">rest</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s1">&#39;Rest&#39;</span><span class="p">):</span>
            <span class="n">num_rests</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Identifier&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">identifier</span><span class="p">],</span> <span class="s1">&#39;Number of Rests&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">num_rests</span><span class="p">]})</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_rests_per_rest_duration"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_rests_per_rest_duration">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_rests_per_rest_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of rests per duration in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each rest is counted separately.</span>
<span class="sd">    Then, it goes through all the rest elements in the music object to count the number of rests per duration.</span>

<span class="sd">    The rest duration count can provide insights about the piece&#39;s rhythmic complexity and structure, specifically</span>
<span class="sd">    regarding the variety and distribution of rest lengths used. This could be useful in various music analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the rest duration count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the rest duration count analysis result, including the identifier,</span>
<span class="sd">        rest durations, rest names, and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    In music notation, rests indicate periods of silence or absence of musical sound. Rests are assigned</span>
<span class="sd">    specific durations, indicating the length of the pause or break in the music. This function analyzes the</span>
<span class="sd">    music21 stream object and counts the number of rests per duration.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the rest</span>
<span class="sd">    durations (quarter lengths), the rest names (duration representations), and the counts of rests for each</span>
<span class="sd">    duration in the music.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">rest_durations</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">rest</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s1">&#39;Rest&#39;</span><span class="p">):</span>
            <span class="n">duration_value</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
            <span class="n">duration_name</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="n">fullName</span>
            <span class="k">if</span> <span class="n">duration_value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rest_durations</span><span class="p">:</span>
                <span class="n">rest_durations</span><span class="p">[</span><span class="n">duration_value</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Duration Name&#39;</span><span class="p">:</span> <span class="n">duration_name</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rest_durations</span><span class="p">[</span><span class="n">duration_value</span><span class="p">][</span><span class="s1">&#39;Count&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">rest_durations</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Rest Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Rest Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Rest Duration&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>

<div class="viewcode-block" id="analysis_number_of_intervals_per_type"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_intervals_per_type">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_intervals_per_type</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of different interval types in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each interval is counted separately.</span>
<span class="sd">    Then, it goes through all the pairs of consecutive notes in the music object to determine the type of interval between</span>
<span class="sd">    them and count the number of occurrences of each interval type.</span>

<span class="sd">    The interval type count can provide insights about the piece&#39;s melodic complexity and structure, specifically</span>
<span class="sd">    regarding the variety and distribution of interval types used. This could be useful in various music analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the interval type count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the interval type count analysis result, including the identifier,</span>
<span class="sd">        interval types, their nice names, positive MIDI pitch value intervals, and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    In music theory and analysis, intervals refer to the distance between two pitches. This function analyzes</span>
<span class="sd">    the music21 stream object and counts the number of occurrences of different interval types.</span>

<span class="sd">    The interval types are represented by their name, and the nice name provides a more descriptive representation.</span>
<span class="sd">    The MIDI pitch value intervals are calculated as the absolute difference between the MIDI pitch values of</span>
<span class="sd">    consecutive notes in the stream. Only positive MIDI pitch value intervals are considered to avoid duplication</span>
<span class="sd">    of intervals with reverse directions.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the interval</span>
<span class="sd">    types, their nice names, the positive MIDI pitch value intervals, and the counts of occurrences for each</span>
<span class="sd">    interval type in the music.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">interval_types</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="n">notes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">pitch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">interval_obj</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">notesToInterval</span><span class="p">(</span><span class="n">notes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">notes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">interval_type</span> <span class="o">=</span> <span class="n">interval_obj</span><span class="o">.</span><span class="n">name</span>
            <span class="n">interval_name</span> <span class="o">=</span> <span class="n">interval_obj</span><span class="o">.</span><span class="n">niceName</span>
            <span class="n">midi_interval</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">notes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span> <span class="o">-</span> <span class="n">notes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">interval_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">interval_types</span><span class="p">:</span>
                <span class="n">interval_types</span><span class="p">[</span><span class="n">interval_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Interval Name&quot;</span><span class="p">:</span> <span class="n">interval_name</span><span class="p">,</span> <span class="s2">&quot;MIDI Interval&quot;</span><span class="p">:</span> <span class="n">midi_interval</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">interval_types</span><span class="p">[</span><span class="n">interval_type</span><span class="p">][</span><span class="s2">&quot;Count&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">interval_types</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="n">interval_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Interval Type&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Interval&#39;</span><span class="p">,</span> <span class="s1">&#39;Interval Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Interval Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;MIDI Interval&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>

<div class="viewcode-block" id="analysis_number_of_intervals_per_type_with_direction"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_intervals_per_type_with_direction">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_intervals_per_type_with_direction</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of different interval types in a music21 stream object and associate it with an identifier,</span>
<span class="sd">    considering the direction of the interval.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each interval is counted separately.</span>
<span class="sd">    Then, it goes through all the pairs of consecutive notes in the music object to determine the type and direction of the</span>
<span class="sd">    interval between them and count the number of occurrences of each interval type.</span>

<span class="sd">    The interval type count can provide insights about the piece&#39;s melodic complexity and structure, specifically</span>
<span class="sd">    regarding the variety and distribution of interval types used, taking into account their direction.</span>
<span class="sd">    This could be useful in various music analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the interval type count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the interval type count analysis result, including the identifier,</span>
<span class="sd">        interval types, their nice names, MIDI pitch value intervals (including direction), and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    In music theory and analysis, intervals refer to the distance between two pitches. Interval directions indicate</span>
<span class="sd">    whether the interval moves upwards (ascending) or downwards (descending) in pitch. This function analyzes the</span>
<span class="sd">    music21 stream object and counts the number of occurrences of different interval types in both ascending and</span>
<span class="sd">    descending directions.</span>

<span class="sd">    The interval types are represented by their directed name, which indicates the direction (e.g., &quot;A2&quot; for an</span>
<span class="sd">    ascending second, &quot;d5&quot; for a descending fifth). The nice name provides a more descriptive representation of the</span>
<span class="sd">    interval. The MIDI pitch value intervals represent the difference in MIDI pitch values between consecutive notes</span>
<span class="sd">    in the stream.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the interval types,</span>
<span class="sd">    their nice names, the MIDI pitch value intervals, and the frequencies of occurrence for each interval type in</span>
<span class="sd">    both ascending and descending directions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="n">notes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span> <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">pitch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">interval_obj</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">notesToInterval</span><span class="p">(</span><span class="n">notes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">notes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">interval_type</span> <span class="o">=</span> <span class="n">interval_obj</span><span class="o">.</span><span class="n">directedName</span>
            <span class="n">interval_name</span> <span class="o">=</span> <span class="n">interval_obj</span><span class="o">.</span><span class="n">niceName</span>
            <span class="n">midi_interval</span> <span class="o">=</span> <span class="n">notes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span> <span class="o">-</span> <span class="n">notes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span>
            <span class="k">if</span> <span class="n">interval_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">:</span>
                <span class="n">intervals</span><span class="p">[</span><span class="n">interval_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Interval Name&quot;</span><span class="p">:</span> <span class="n">interval_name</span><span class="p">,</span> <span class="s2">&quot;MIDI Interval&quot;</span><span class="p">:</span> <span class="n">midi_interval</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">intervals</span><span class="p">[</span><span class="n">interval_type</span><span class="p">][</span><span class="s2">&quot;Count&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">intervals</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="n">intervals</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Interval&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Interval&#39;</span><span class="p">,</span> <span class="s1">&#39;Interval&#39;</span><span class="p">,</span> <span class="s1">&#39;Interval Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;MIDI Interval&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_sound_events_per_pitch"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_sound_events_per_pitch">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_sound_events_per_pitch</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of sound events per pitch in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each sound event is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch.</span>

<span class="sd">    The sound event count per pitch can provide insights about the piece&#39;s tonality, mode, key, and structure,</span>
<span class="sd">    specifically regarding the usage frequency of different pitches. This could be useful in various music analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the sound event per pitch count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the sound events per pitch count analysis result, including the identifier,</span>
<span class="sd">        MIDI Pitch, pitch names, and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Sound events refer to individual occurrences of pitches in the music stream. This function analyzes the</span>
<span class="sd">    music21 stream object and counts the number of sound events (notes) per pitch.</span>

<span class="sd">    The analysis considers the MIDI pitch value, the pitch name with octave information, and the count of sound</span>
<span class="sd">    events for each pitch.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the MIDI pitch</span>
<span class="sd">    value, the pitch name, and the count of sound events for each pitch.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sound_events_per_pitch</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">pitch_name</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">nameWithOctave</span>
            <span class="n">midi_pitch</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span>
            <span class="k">if</span> <span class="n">pitch_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sound_events_per_pitch</span><span class="p">:</span>
                <span class="n">sound_events_per_pitch</span><span class="p">[</span><span class="n">pitch_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;MIDI Pitch&quot;</span><span class="p">:</span> <span class="n">midi_pitch</span><span class="p">,</span> <span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sound_events_per_pitch</span><span class="p">[</span><span class="n">pitch_name</span><span class="p">][</span><span class="s2">&quot;Count&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sound_events_per_pitch</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="n">sound_events_per_pitch</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Pitch Name&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Pitch&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;MIDI Pitch&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_sound_events_per_pitch_class"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_sound_events_per_pitch_class">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_sound_events_per_pitch_class</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of sound events per pitch class in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each sound event is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch class.</span>

<span class="sd">    The sound event count per pitch class can provide insights about the piece&#39;s tonality, mode, key, and structure,</span>
<span class="sd">    specifically regarding the usage frequency of different pitch classes, irrespective of the octave they belong to.</span>
<span class="sd">    This could be useful in various music analysis tasks, especially those concerning tonal or modal attributes of the music.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the sound event per pitch class count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing</span>
<span class="sd">        different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the sound events per pitch class count analysis result, including the identifier,</span>
<span class="sd">        MIDI Pitch Class, pitch class names, and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Sound events refer to individual occurrences of pitches in the music stream. This function analyzes the</span>
<span class="sd">    music21 stream object and counts the number of sound events (notes) per pitch class.</span>

<span class="sd">    The pitch class represents the chromatic pitch value without octave information. The analysis assigns</span>
<span class="sd">    pitch class symbols (e.g., &quot;C&quot;, &quot;D#&quot;, &quot;G&quot;) to each pitch class. The count of sound events (notes) for</span>
<span class="sd">    each pitch class is also calculated.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the MIDI pitch</span>
<span class="sd">    class value, the pitch class symbol, and the count of sound events for each pitch class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sound_events_per_pitch_class</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">pitch_class</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">pitchClass</span>
            <span class="k">if</span> <span class="n">pitch_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sound_events_per_pitch_class</span><span class="p">:</span>
                <span class="n">sound_events_per_pitch_class</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Pitch Class Name&quot;</span><span class="p">:</span> <span class="n">PITCH_CLASS_NAMES</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">],</span>
                                                             <span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sound_events_per_pitch_class</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">][</span><span class="s2">&quot;Count&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sound_events_per_pitch_class</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="n">sound_events_per_pitch_class</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;MIDI Pitch Class&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;MIDI Pitch Class&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_sound_events_per_tone_duration"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_sound_events_per_tone_duration">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_sound_events_per_tone_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of sound events per tone duration (quarter length) in a music21 stream object,</span>
<span class="sd">    and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each sound event is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each tone duration.</span>

<span class="sd">    The sound event count per tone duration can provide insights about the rhythmic complexity and structure of the piece,</span>
<span class="sd">    specifically regarding the usage frequency of different tone durations. This could be useful in various music analysis tasks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the sound event per tone duration count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the sound event per tone duration count analysis result, including the identifier, tone duration,</span>
<span class="sd">        their nice names (duration name), and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Sound events refer to individual occurrences of tones in the music stream. This function analyzes the music21</span>
<span class="sd">    stream object and counts the number of sound events (notes) per tone duration.</span>

<span class="sd">    The tone duration is represented by the quarter length, which indicates the duration of a tone in terms of</span>
<span class="sd">    musical beats. The analysis includes the tone duration name (e.g., &quot;Whole&quot;, &quot;Half&quot;, &quot;Quarter&quot;) and the count</span>
<span class="sd">    of sound events for each tone duration.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the tone duration,</span>
<span class="sd">    the tone duration name, and the count of sound events for each tone duration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sound_events_per_tone_durations</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">tone_duration</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
            <span class="n">tone_duration_name</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">fullName</span>
            <span class="k">if</span> <span class="n">tone_duration</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sound_events_per_tone_durations</span><span class="p">:</span>
                <span class="n">sound_events_per_tone_durations</span><span class="p">[</span><span class="n">tone_duration</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tone Duration Name&quot;</span><span class="p">:</span> <span class="n">tone_duration_name</span><span class="p">,</span> <span class="s2">&quot;Count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sound_events_per_tone_durations</span><span class="p">[</span><span class="n">tone_duration</span><span class="p">][</span><span class="s2">&quot;Count&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sound_events_per_tone_durations</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="n">sound_events_per_tone_durations</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Tone Duration&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Tone Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Tone Duration Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">]]</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Tone Duration&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_sound_events_per_metrical_position"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_sound_events_per_metrical_position">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_sound_events_per_metrical_position</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of sound events per metrical position in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each sound event is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each metrical position.</span>

<span class="sd">    The sound event count per metrical position can provide insights about the rhythmic complexity and structure of the piece,</span>
<span class="sd">    specifically regarding the distribution and emphasis of metrical positions. This could be useful in various music analysis tasks, especially those concerning rhythmic patterns and accentuation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the sound event per metrical position count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the sound event per metrical position count analysis result, including the identifier,</span>
<span class="sd">        metrical positions, and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Metrical positions refer to the specific positions within the musical meter, typically measured in beats.</span>
<span class="sd">    This analysis counts the number of sound events (tones) that start on the same metrical positions in the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the metrical position,</span>
<span class="sd">    and the count of sound events for each metrical position.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tone_counts</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">metrical_position</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">beat</span>
            <span class="k">if</span> <span class="n">metrical_position</span> <span class="ow">in</span> <span class="n">tone_counts</span><span class="p">:</span>
                <span class="n">tone_counts</span><span class="p">[</span><span class="n">metrical_position</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tone_counts</span><span class="p">[</span><span class="n">metrical_position</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">metrical_position</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">tone_counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">identifier</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Metrical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Metrical Position&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_pitches_per_tone_duration"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_pitches_per_tone_duration">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_pitches_per_tone_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of pitches per tone duration (quarter length) in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch-duration pair is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch-duration combination.</span>

<span class="sd">    The pitch count per tone duration can provide insights about the piece&#39;s tonality, mode, key, structure, and rhythmic complexity,</span>
<span class="sd">    specifically regarding the usage frequency of different pitches at each tone duration. This could be useful in various music analysis tasks, especially those concerning the interaction of melody and rhythm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the pitch per tone duration count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the pitch per tone duration count analysis result, including the identifier,</span>
<span class="sd">        MIDI Pitch, pitch names, tone durations, their nice names (duration name), and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function analyzes the music21 stream object and counts the number of pitches per duration (quarter length).</span>

<span class="sd">    The analysis considers each pitch occurring in the music stream along with its associated duration. The duration</span>
<span class="sd">    is represented by the quarter length, indicating the length of the pitch in terms of musical beats. The count of</span>
<span class="sd">    sound events (pitches) is calculated for each combination of pitch and duration.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the MIDI Pitches,</span>
<span class="sd">    Pitch Names, Duration, Duration Names, and the count of sound events for each combination of pitch and duration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitch_over_durations</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">pitch</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span>
            <span class="n">pitch_name</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">nameWithOctave</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
            <span class="n">duration_name</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">fullName</span>
            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">duration_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pitch_over_durations</span><span class="p">:</span>
                <span class="n">pitch_over_durations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pitch_over_durations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">duration_name</span><span class="p">),</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">pitch_over_durations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">identifier</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">duration_name</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span>
                          <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Pitches&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Names&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Names&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;MIDI Pitches&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_pitches_per_metrical_position"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_pitches_per_metrical_position">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_pitches_per_metrical_position</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of occurrences of each pitch at each metrical position in a music21 stream object and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch-metrical position pair is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch-metrical position combination.</span>

<span class="sd">    The pitch count per metrical position can provide insights about the piece&#39;s tonality, mode, key, structure, and rhythmic complexity,</span>
<span class="sd">    specifically regarding the usage frequency of different pitches at each metrical position. This could be useful in various music analysis tasks, especially those concerning the interaction of melody and rhythm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the pitch per metrical position count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the pitch per metrical position count analysis result, including the identifier,</span>
<span class="sd">        MIDI Pitch, pitch names, metrical positions, and their counts.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Metrical positions refer to the specific positions within the musical meter, typically measured in beats. This analysis</span>
<span class="sd">    counts the number of occurrences of each pitch (including octave information) that start on the same metrical</span>
<span class="sd">    positions in the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the metrical position,</span>
<span class="sd">    the MIDI number and name of each pitch, and the count of each pitch at each metrical position.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitches_per_metrical_position</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">metrical_position</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">beat</span>
            <span class="n">pitch</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span>
            <span class="n">pitch_name</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">nameWithOctave</span>
            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pitches_per_metrical_position</span><span class="p">:</span>
                <span class="n">pitches_per_metrical_position</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pitches_per_metrical_position</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
                   <span class="k">for</span> <span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">),</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">pitches_per_metrical_position</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Pitches&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Metrical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;MIDI Pitches&#39;</span><span class="p">,</span> <span class="s1">&#39;Metrical Position&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_pitches_per_offset"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_pitches_per_offset">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_pitches_per_offset</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of pitches per offset (time position) in a music21 stream object, and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch-offset pair is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch-offset combination.</span>

<span class="sd">    The pitch count per offset can provide insights about the temporal distribution of pitches within the piece, the unfolding of the melody over time,</span>
<span class="sd">    and potential recurring motifs or themes. This could be useful in various music analysis tasks, especially those concerning the interaction of melody and rhythm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the pitch per offset count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the pitch per offset count analysis result, including the identifier, offset (time position),</span>
<span class="sd">        MIDI pitch, pitch name, and the count of sound events.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An offset refers to the time position of a musical event within a piece of music. It represents the time elapsed</span>
<span class="sd">    since the beginning of the music or a specific reference point. In this analysis, the function examines the pitches</span>
<span class="sd">    (notes) occurring at different offsets (time positions) in the music and counts the number of occurrences for each</span>
<span class="sd">    pitch at each offset.</span>

<span class="sd">    The offset values represent the time positions in the music stream, usually measured in beats or fractions of beats.</span>
<span class="sd">    By analyzing the pitches over offsets, it is possible to gain insights into the distribution of pitches and their</span>
<span class="sd">    temporal relationships within the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the offset (time</span>
<span class="sd">    position), the MIDI pitch, the pitch name, and the count of sound events (number of occurrences) for each combination</span>
<span class="sd">    of offset and pitch.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitches_over_offsets</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">):</span>
                <span class="n">midi_pitch</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span>
                <span class="n">pitch_name</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">nameWithOctave</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">offset</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">midi_pitch</span><span class="p">,</span> <span class="n">pitch_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pitches_over_offsets</span><span class="p">:</span>
                    <span class="n">pitches_over_offsets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pitches_over_offsets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">pitches_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">pitches_over_offsets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">pitches_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">identifier</span><span class="p">,</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">key</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pitches_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;MIDI Pitches&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Offset&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;MIDI Pitches&#39;</span><span class="p">,</span> <span class="s1">&#39;Offset&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_pitch_classes_per_tone_duration"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_pitch_classes_per_tone_duration">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_pitch_classes_per_tone_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of pitch classes per tone duration (quarter length) in a music21 stream object, and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch class-duration pair is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch class-duration combination.</span>

<span class="sd">    The pitch class count per tone duration can provide insights about the piece&#39;s tonality, mode, key, and rhythmic structure,</span>
<span class="sd">    specifically regarding the usage frequency of different pitch classes at each tone duration. This could be useful in various music analysis tasks,</span>
<span class="sd">    especially those concerning the interaction of melody and rhythm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the pitch class per tone duration count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the pitch class per tone duration count analysis result, including the identifier,</span>
<span class="sd">        pitch class, tone duration, pitch class symbol, and the count of sound events.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitch_classes_over_durations</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">pitch_class</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">pitchClass</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
            <span class="n">duration_names</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">fullName</span>
            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">pitch_class</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">duration_names</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pitch_classes_over_durations</span><span class="p">:</span>
                <span class="n">pitch_classes_over_durations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pitch_classes_over_durations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">pitch_class</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">duration_names</span><span class="p">),</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">pitch_classes_over_durations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">pitch_class_symbol</span> <span class="o">=</span> <span class="n">PITCH_CLASS_NAMES</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">]</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">identifier</span><span class="p">,</span> <span class="n">pitch_class</span><span class="p">,</span> <span class="n">pitch_class_symbol</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">duration_names</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class Symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Names&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_pitch_classes_per_metrical_position"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_pitch_classes_per_metrical_position">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_pitch_classes_per_metrical_position</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of occurrences of each pitch class at each metrical position in a music21 stream object, and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch class-metrical position pair is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch class-metrical position combination.</span>

<span class="sd">    The pitch class count per metrical position can provide insights about the piece&#39;s tonality, mode, key, and rhythmic structure,</span>
<span class="sd">    specifically regarding the usage frequency of different pitch classes at each metrical position. This could be useful in various music analysis tasks,</span>
<span class="sd">    especially those concerning the interaction of melody and rhythm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the pitch class per metrical position count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the pitch class per metrical position count analysis result, including the identifier,</span>
<span class="sd">        metrical position, pitch class, pitch class name, and the count of each pitch class.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Metrical positions refer to the specific positions within the musical meter, typically measured in beats. This analysis</span>
<span class="sd">    counts the number of occurrences of each pitch class (without octave information) that start on the same metrical</span>
<span class="sd">    positions in the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the metrical position,</span>
<span class="sd">    the number and name of each pitch class, and the count of each pitch class at each metrical position.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitch_classes_per_metrical_position</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">note_obj</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">()</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">metrical_position</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">beat</span>
            <span class="n">pitch_class</span> <span class="o">=</span> <span class="n">note_obj</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">pitchClass</span>
            <span class="n">pitch_class_name</span> <span class="o">=</span> <span class="n">PITCH_CLASS_NAMES</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">pitch_class</span><span class="p">,</span> <span class="n">pitch_class_name</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pitch_classes_per_metrical_position</span><span class="p">:</span>
                <span class="n">pitch_classes_per_metrical_position</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pitch_classes_per_metrical_position</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">pitch_class</span><span class="p">,</span> <span class="n">pitch_class_name</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
                   <span class="k">for</span> <span class="p">(</span><span class="n">pitch_class</span><span class="p">,</span> <span class="n">pitch_class_name</span><span class="p">,</span> <span class="n">metrical_position</span><span class="p">),</span> <span class="n">count</span> <span class="ow">in</span>
                   <span class="n">pitch_classes_per_metrical_position</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Metrical Position&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Metrical Position&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_number_of_pitch_classes_per_offset"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_number_of_pitch_classes_per_offset">[docs]</a><span class="k">def</span> <span class="nf">analysis_number_of_pitch_classes_per_offset</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze and count the number of pitch classes per offset (time position) in a music21 stream object, and associate it with an identifier.</span>

<span class="sd">    The function first prepares the music object by removing tied notes to ensure that each pitch class-offset pair is counted separately.</span>
<span class="sd">    Then, it goes through all the notes in the music object to count the number of occurrences of each pitch class-offset combination.</span>

<span class="sd">    The pitch class count per offset can provide insights about the temporal distribution of pitch classes within the piece, the unfolding of the harmony over time,</span>
<span class="sd">    and potential recurring motifs or themes. This could be useful in various music analysis tasks, especially those concerning the interaction of harmony and rhythm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the pitch class per offset count analysis will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame with rows representing the pitch class per offset count analysis result, including the identifier, offset (time position),</span>
<span class="sd">        pitch class, pitch class name, and the count of sound events.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    An offset refers to the time position of a musical event within a piece of music. It represents the time elapsed</span>
<span class="sd">    since the beginning of the music or a specific reference point. In this analysis, the function examines the pitch</span>
<span class="sd">    classes (chromatic pitch values without octave) occurring at different offsets (time positions) in the music and</span>
<span class="sd">    counts the number of occurrences for each pitch class at each offset.</span>

<span class="sd">    The offset values represent the time positions in the music stream, usually measured in beats or fractions of beats.</span>
<span class="sd">    By analyzing the pitch classes over offsets, it is possible to observe the distribution of pitch classes and their</span>
<span class="sd">    temporal relationships within the music.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the offset (time</span>
<span class="sd">    position), the pitch class (chromatic pitch value without octave), the pitch class name, and the count of sound</span>
<span class="sd">    events (number of occurrences) for each combination of offset and pitch class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitch_classes_over_offsets</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">music_obj</span> <span class="o">=</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">stripTies</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">music_obj</span><span class="o">.</span><span class="n">recurse</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">):</span>
                <span class="n">pitch_class</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">pitchClass</span>
                <span class="n">pitch_class_name</span> <span class="o">=</span> <span class="n">PITCH_CLASS_NAMES</span><span class="p">[</span><span class="n">pitch_class</span><span class="p">]</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">offset</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">pitch_class</span><span class="p">,</span> <span class="n">pitch_class_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pitch_classes_over_offsets</span><span class="p">:</span>
                    <span class="n">pitch_classes_over_offsets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pitch_classes_over_offsets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">pitch_classes_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">pitch_classes_over_offsets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">pitch_classes_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">identifier</span><span class="p">,</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">key</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pitch_classes_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Class Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Offset&#39;</span><span class="p">,</span> <span class="s1">&#39;Count&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;Pitch Class&#39;</span><span class="p">,</span> <span class="s1">&#39;Offset&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>

<span class="c1"># combination functions</span>


<div class="viewcode-block" id="analysis_advanced_calculate_activity_rate"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_advanced_calculate_activity_rate">[docs]</a><span class="k">def</span> <span class="nf">analysis_advanced_calculate_activity_rate</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the activity index of a music21 stream object, representing the ratio of the number of notes to the number of rests.</span>

<span class="sd">    The function calculates the number of notes and rests separately, and then calculates their ratio. If the number of rests is zero,</span>
<span class="sd">    it treats the activity rate as NaN to avoid division by zero.</span>

<span class="sd">    The resulting DataFrame contains the identifier (to distinguish different analysis results), the number of notes,</span>
<span class="sd">    the number of rests, and the activity index for the piece. This information can be useful in comparing the musical density</span>
<span class="sd">    or &#39;activity level&#39; of different pieces or sections.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the activity index will be calculated.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame including the identifier, number of notes, number of rests, and the activity index.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The activity index is defined as the ratio of the number of notes to the number of rests in a piece of music.</span>
<span class="sd">    This index provides a measure of the &#39;density&#39; of musical events in the piece, indicating the ratio of musical</span>
<span class="sd">    activity to silence. A higher activity index implies more notes relative to rests, suggesting a more &#39;active&#39; or &#39;busy&#39; piece,</span>
<span class="sd">    while a lower activity index means more rests relative to notes, suggesting a more &#39;calm&#39; or &#39;sparse&#39; piece.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">notes_df</span> <span class="o">=</span> <span class="n">analysis_number_of_notes</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>
        <span class="n">rests_df</span> <span class="o">=</span> <span class="n">analysis_number_of_rests</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>

        <span class="n">num_notes</span> <span class="o">=</span> <span class="n">notes_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">notes_df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">identifier</span><span class="p">,</span> <span class="s1">&#39;Number of Notes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">num_rests</span> <span class="o">=</span> <span class="n">rests_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rests_df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">identifier</span><span class="p">,</span> <span class="s1">&#39;Number of Rests&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Avoid division by zero</span>
        <span class="k">if</span> <span class="n">num_rests</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">activity_rate</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;NaN&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">activity_rate</span> <span class="o">=</span> <span class="n">num_notes</span> <span class="o">/</span> <span class="n">num_rests</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Identifier&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">identifier</span><span class="p">],</span> <span class="s1">&#39;Number of Notes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">num_notes</span><span class="p">],</span> <span class="s1">&#39;Number of Rests&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">num_rests</span><span class="p">],</span>
                           <span class="s1">&#39;Activity Index&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">activity_rate</span><span class="p">]})</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Activity Index&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>


<div class="viewcode-block" id="analysis_advanced_compare_pitches_and_pitch_classes_per_duration"><a class="viewcode-back" href="../../../module_files/src.analysis.html#src.analysis.functions.analysis_advanced_compare_pitches_and_pitch_classes_per_duration">[docs]</a><span class="k">def</span> <span class="nf">analysis_advanced_compare_pitches_and_pitch_classes_per_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compare the number of distinct pitches and pitch classes per duration in a music21 stream object.</span>

<span class="sd">    This function combines the analysis of the number of distinct pitches per duration and the number of distinct pitch classes per duration.</span>
<span class="sd">    By comparing these two analyses, one can observe how the tonal variety (in terms of both specific pitches and pitch classes)</span>
<span class="sd">    changes with the duration of notes in the music piece.</span>

<span class="sd">    The function first calculates the number of distinct pitches and pitch classes per duration separately. Then, it merges the results</span>
<span class="sd">    and calculates the ratio of pitches to pitch classes for each duration.</span>

<span class="sd">    The resulting DataFrame includes the identifier, duration (quarter length), duration names, count of distinct pitches,</span>
<span class="sd">    count of distinct pitch classes, and the pitch to pitch class ratio for each duration. This information can be useful in studying</span>
<span class="sd">    the correlation between note duration and tonal variety in the music piece.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    music_obj : music21.stream.Stream</span>
<span class="sd">        The music21 stream object representing a musical piece, on which the comparison of pitches and pitch classes per duration will be performed.</span>
<span class="sd">    identifier : str</span>
<span class="sd">        The identifier string which is used to label the analysis result, which could be useful in distinguishing different results or referring to them in later processes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        A pandas DataFrame including the identifier, duration (quarter length), duration names, count of distinct pitches, count of distinct pitch classes, and the ratio of pitches to pitch classes for each duration.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The pitch to pitch class ratio provides a measure of tonal repetition and variety for each note duration:</span>
<span class="sd">    * Ratio = 1: A ratio of 1 indicates that every pitch for a given duration is unique, i.e., all the pitches belong to different pitch classes.</span>
<span class="sd">      This suggests a high degree of tonal variety for that duration.</span>
<span class="sd">    * Ratio &gt; 1: A ratio greater than 1 indicates that some pitches are being repeated for notes of that duration. The higher the ratio,</span>
<span class="sd">      the greater the repetition of certain pitches, suggesting a focus or emphasis on these specific pitch classes in that duration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pitches_df</span> <span class="o">=</span> <span class="n">analysis_number_of_pitches_per_tone_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>
        <span class="n">pitch_classes_df</span> <span class="o">=</span> <span class="n">analysis_number_of_pitch_classes_per_tone_duration</span><span class="p">(</span><span class="n">music_obj</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>

        <span class="c1"># Group and count the number of pitches and pitch classes per duration</span>
        <span class="n">pitches_count_df</span> <span class="o">=</span> <span class="n">pitches_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Names&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Pitches Count&#39;</span><span class="p">)</span>
        <span class="n">pitch_classes_count_df</span> <span class="o">=</span> <span class="n">pitch_classes_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Names&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Pitch Classes Count&#39;</span><span class="p">)</span>

        <span class="c1"># Merge the two dataframes on Duration and Duration Names</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pitches_count_df</span><span class="p">,</span> <span class="n">pitch_classes_count_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Names&#39;</span><span class="p">])</span>

        <span class="c1"># Calculate the pitch to pitch class ratio</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Pitch to Pitch Class Ratio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Pitches Count&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Pitch Classes Count&#39;</span><span class="p">]</span>

        <span class="c1"># Add identifier column</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">identifier</span>

        <span class="c1"># Reorder columns</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration&#39;</span><span class="p">,</span> <span class="s1">&#39;Duration Names&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitches Count&#39;</span><span class="p">,</span> <span class="s1">&#39;Pitch Classes Count&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;Pitch to Pitch Class Ratio&#39;</span><span class="p">]]</span>

        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Pitch to Pitch Class Ratio&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">I-MaT</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting Started with I-MaT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../module_files/src.html">I-MaT: Source Code</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Sebastian Oliver Eck.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>